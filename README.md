# News SPA

Одностраничное новостное веб-приложение на базе React и Vite.  
Приложение отображает ленту актуальных новостей, позволяет выполнять поиск, фильтрацию по категориям и просматривать детальную информацию по каждой статье. Проект выполнен в рамках курса по веб-программированию.

---

## Возможности

- Получение новостей из внешнего REST-API новостного сервиса или из локальных тестовых данных (mock-данных).
- Отображение ленты в виде удобной сетки карточек с заголовком, кратким описанием, изображением, датой публикации и названием источника.
- Поиск по тексту с использованием «умной» задержки (дебаунса), чтобы не перегружать API при наборе.
- Фильтрация по категориям (бизнес, развлечения, наука, спорт, технологии и др.).
- Бесконечная прокрутка — автоматическая подгрузка следующих страниц новостей при прокрутке вниз.
- Детальный просмотр статьи на отдельной странице (источник, дата и время, автор, основное содержание, иллюстрация).
- Переход к первоисточнику в отдельной вкладке браузера.
- Обработка ошибок и состояний: индикатор загрузки, информирование об ошибках и возможность повторного запроса.

---

## Стек технологий

- Язык: JavaScript (ES6+)
- Фреймворк: React 18
- Сборщик/Dev-сервер: Vite
- Маршрутизация: React Router
- Управление состоянием: React Context API + `useReducer`
- Хуки: `useEffect`, `useMemo`, `useCallback`, пользовательские хуки
- API-клиент: Fetch API
- Инфраструктура: Node.js, npm
- IDE: WebStorm

---

## Установка и запуск

### 1. Предварительные требования

- Node.js (рекомендуется LTS-версия 18+)
- npm (устанавливается вместе с Node.js)
- Доступ к интернету (для работы с реальным новостным API) или использование mock-данных

### 2. Клонирование репозитория

```bash
git clone https://github.com/GomanNik/news-spa.git
cd news-spa
````

### 3. Установка зависимостей

```bash
npm install
```

### 4. Переменные окружения

В корне проекта создайте файл `.env` и укажите в нём режим работы и ключ API (если используется реальное API):

```env
VITE_USE_MOCK=false
VITE_NEWS_API_KEY=ВАШ_API_КЛЮЧ
```

* `VITE_USE_MOCK=false` — использовать реальное API новостей.
* `VITE_USE_MOCK=true` — использовать локальные тестовые данные из `src/mocks/news.json`.
* `VITE_NEWS_API_KEY` — ключ доступа к новостному API (например, NewsAPI.org).
  При использовании только mock-данных достаточно выставить `VITE_USE_MOCK=true`, ключ можно не указывать.

### 5. Запуск в режиме разработки

```bash
npm run dev
```

По умолчанию приложение будет доступно по адресу:

```text
http://localhost:5173
```

### 6. Сборка и предпросмотр production-версии

```bash
npm run build
npm run preview
```

---

## Структура проекта

```text
src/
  App.jsx            # Корневой компонент приложения (шапка, футер, маршруты)
  main.jsx           # Точка входа, подключение React и BrowserRouter
  styles.css         # Глобальные стили приложения

  components/        # Переиспользуемые UI-компоненты
    CategoryFilter.jsx
    ErrorBanner.jsx
    Loader.jsx
    NewsCard.jsx
    NewsList.jsx
    SearchBar.jsx

  pages/             # Страницы приложения
    Home.jsx         # Главная страница с лентой новостей, поиском и фильтром
    Article.jsx      # Страница детального просмотра выбранной новости

  context/
    NewsContext.jsx  # Контекст новостной ленты: состояние, загрузка данных, сброс

  reducers/
    newsReducer.js   # Редьюсер для управления состоянием новостей (статьи, статус, пагинация)

  services/
    newsApi.js       # Логика работы с внешним REST-API и mock-данными, нормализация статей

  hooks/
    useDebounce.js       # Кастомный хук для "умной" задержки (дебаунса) поискового запроса
    useInfiniteScroll.js # Кастомный хук для реализации бесконечной прокрутки через IntersectionObserver

  mocks/
    news.json        # Локальные тестовые данные (мок-новости)
```

---

## Основная логика

### App.jsx

* Подключение `BrowserRouter` и определение маршрутов:

    * `/` — главная страница (`Home`);
    * `/article/:id` — детальный просмотр новости (`Article`).
* Оборачивание приложения в `NewsProvider` (контекст новостей).
* Отображение шапки и футера.

### NewsContext.jsx

* Хранение состояния новостей с помощью `useReducer`:

    * поисковый запрос;
    * выбранная категория;
    * список статей;
    * номер текущей страницы;
    * флаг `hasMore`;
    * статус загрузки и текст ошибки.
* Функции:

    * `loadMore` — загрузка очередной страницы новостей;
    * `resetHome` — сброс фильтров и ленты;
    * автоматический вызов загрузки при изменении поиска или категории с учётом дебаунса.

### newsApi.js

* Формирование запросов к внешнему новостному API или чтение mock-данных.
* Нормализация структуры ответов (id, заголовок, описание, картинка, источник, дата, автор, контент).
* Обработка ошибок (в том числе лимиты запросов и таймауты).

### useDebounce.js и useInfiniteScroll.js

* `useDebounce` — откладывает выполнение запроса, пока пользователь вводит текст.
* `useInfiniteScroll` — отслеживает появление «сентинела» внизу страницы через `IntersectionObserver` и вызывает `loadMore`.


